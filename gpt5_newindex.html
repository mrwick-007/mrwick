<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Meta -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>mr wick</title>
  <meta name="description" content="A sleek, bold, and elegant John Wick‚Äìthemed landing page." />
  <meta name="theme-color" content="#1b0f28" />

  <!-- Favicon -->
  <link rel="icon" href="favicon.ico" type="image/x-icon">

  <!-- Fonts (preconnect + Orbitron) -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;600;700&display=swap" rel="stylesheet">

  <!-- Performance hints (optional, safe to keep even if files are missing) -->
  <link rel="preload" href="bg1.jpg" as="image" />
  <link rel="preload" href="profile.jpg" as="image" />
  <link rel="preload" href="background.mp3" as="audio" />

  <style>
    :root{
      --bg:#0e0814;
      --card:#28183f;
      --card-opaque: rgba(40, 24, 63, 0.88);
      --ink:#eae6ff;
      --muted:#b7aee0;
      --accent:#9b5cff; /* neon violet */
      --accent-2:#00d1ff; /* cyan edge light */
      --glow: 0 0 18px rgba(155,92,255,0.5), 0 0 36px rgba(0,209,255,0.15);
      --radius: 18px;
      --shadow: 0 12px 40px rgba(0,0,0,0.45);
      --blur: 8px;
    }

    *{
      box-sizing:border-box;
      margin:0;
      padding:0;
    }

    html, body{
      height:100%;
      font-family:'Orbitron', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: var(--bg);
      color: var(--ink);
      overflow:hidden;
    }

    /* Background image + subtle vignette + scanline effect (very light) */
    body::before{
      content:"";
      position:fixed;
      inset:0;
      background:
        radial-gradient(1200px 600px at 75% 10%, rgba(0,209,255,0.08), transparent 60%),
        radial-gradient(900px 500px at 20% 70%, rgba(155,92,255,0.10), transparent 60%),
        linear-gradient(180deg, rgba(0,0,0,0.12), rgba(0,0,0,0.4)),
        url('bg1.jpg') no-repeat center/cover;
      will-change: transform, opacity;
      z-index:-2;
    }

    /* Ultra-light scanlines for the cinematic vibe */
    body::after{
      content:"";
      position:fixed;
      inset:0;
      pointer-events:none;
      background: repeating-linear-gradient(
        to bottom,
        rgba(255,255,255,0.018),
        rgba(255,255,255,0.018) 1px,
        transparent 1px,
        transparent 3px
      );
      mix-blend-mode: overlay;
      opacity:0.35;
      z-index:-1;
    }

    /* Entry screen (tap/click to enter) */
    #entry-screen{
      position: fixed;
      inset:0;
      background: rgba(0,0,0,0.55);
      backdrop-filter: blur(var(--blur));
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      z-index:1000;
      cursor:pointer;
      transition: opacity .3s ease;
      user-select:none;
    }

    .entry-inner{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:16px;
    }

    .enter-pill{
      display:inline-flex;
      align-items:center;
      gap:10px;
      background: linear-gradient(135deg, rgba(155,92,255,0.18), rgba(0,209,255,0.18));
      border:1px solid rgba(155,92,255,0.45);
      padding:12px 22px;
      border-radius:999px;
      box-shadow: var(--glow);
      transition: transform .15s ease, box-shadow .2s ease, border-color .2s ease;
    }
    .enter-pill:hover{
      transform: translateY(-2px);
      border-color: rgba(0,209,255,0.55);
      box-shadow: 0 0 22px rgba(0,209,255,0.35), 0 0 36px rgba(155,92,255,0.25);
    }

    .hint{
      color: var(--muted);
      font-size:12px;
      letter-spacing:1px;
      opacity:0.85;
    }

    /* Audio control */
    #audio-control{
      position: absolute;
      top:18px;
      left:18px;
      display:none;
      z-index:10;
      background: rgba(27, 15, 40, 0.8);
      border:1px solid rgba(155,92,255,0.35);
      border-radius:12px;
      box-shadow: var(--shadow);
      color:#fff;
      padding:8px 10px;
      display:flex;
      align-items:center;
      gap:10px;
      user-select:none;
    }

    .btn-icon{
      cursor:pointer;
      font-size:18px;
      line-height:1;
      padding:6px 8px;
      border-radius:8px;
      border:1px solid transparent;
      transition: transform .1s ease, border-color .2s ease, background .2s ease;
    }
    .btn-icon:hover{
      transform: translateY(-1px);
      border-color: rgba(155,92,255,0.45);
      background: rgba(155,92,255,0.08);
    }

    #volume-wrap{
      position:relative;
    }
    #volume-slider{
      display:none;
      width:120px;
      accent-color: var(--accent);
    }
    #volume-wrap:hover #volume-slider{
      display:block;
    }

    /* Center card */
    .center-box{
      position: absolute;
      top:50%;
      left:50%;
      transform: translate(-50%,-50%);
      width:min(420px, 92vw);
      background: var(--card-opaque);
      border:1px solid rgba(155,92,255,0.45);
      border-radius: var(--radius);
      box-shadow: var(--shadow), var(--glow);
      padding:56px 38px 40px;
      text-align:center;
      display:none;
      overflow:hidden;
      isolation:isolate;
    }

    /* Subtle corner highlight */
    .center-box::before{
      content:"";
      position:absolute;
      inset:-2px;
      border-radius: inherit;
      background:
        radial-gradient(500px 200px at 110% -10%, rgba(0,209,255,0.18), transparent 40%),
        radial-gradient(300px 150px at -10% 110%, rgba(155,92,255,0.18), transparent 40%);
      pointer-events:none;
      mix-blend-mode: screen;
      opacity:0.8;
      z-index:-1;
    }

    .profile-pic{
      width:120px;
      height:120px;
      border-radius:50%;
      object-fit:cover;
      margin:0 auto 16px;
      border:2px solid rgba(0,209,255,0.5);
      box-shadow: 0 0 18px rgba(0,209,255,0.35);
    }

    h1{
      font-size:26px;
      letter-spacing:2px;
      text-transform:lowercase;
      margin-bottom:18px;
      color:#fff;
      text-shadow: 0 0 10px rgba(255,255,255,0.35);
    }

    .tagline{
      font-size:12px;
      color: var(--muted);
      letter-spacing:2.2px;
      text-transform:uppercase;
      margin-bottom:22px;
      opacity:0.9;
    }

    .icons{
      display:flex;
      flex-direction:column;
      gap:14px;
      align-items:center;
      margin-top:6px;
    }
    .link{
      display:inline-flex;
      align-items:center;
      gap:10px;
      color:white;
      text-decoration:none;
      font-size:16px;
      padding:10px 14px;
      border-radius:10px;
      border:1px solid rgba(155,92,255,0.4);
      background: linear-gradient(135deg, rgba(155,92,255,0.10), rgba(0,209,255,0.08));
      transition: transform .12s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease;
      width: 100%;
      justify-content:center;
    }
    .link:hover{
      transform: translateY(-2px);
      border-color: rgba(0,209,255,0.6);
      box-shadow: var(--glow);
      background: linear-gradient(135deg, rgba(155,92,255,0.16), rgba(0,209,255,0.12));
    }

    .sep{
      height:1px;
      width:100%;
      background: linear-gradient(to right, transparent, rgba(255,255,255,0.25), transparent);
      margin: 6px 0 4px;
      opacity:0.6;
    }

    /* Reduced motion preference */
    @media (prefers-reduced-motion: reduce){
      *, *::before, *::after{
        animation:none !important;
        transition:none !important;
      }
      body::after{ display:none; }
    }

    /* Small screens */
    @media (max-width:420px){
      .center-box{ padding:44px 22px 30px; }
      h1{ font-size:22px; }
    }
  </style>
</head>
<body>
  <!-- Entry overlay -->
  <div id="entry-screen" role="button" aria-label="Click or press Enter to enter">
    <div class="entry-inner">
      <div class="enter-pill">
        <span>click to enter</span> <span>‚Ä¢</span> <span>tap to enter</span>
      </div>
      <div class="hint">audio starts after you enter ‚Ä¢ press M to mute</div>
    </div>
  </div>

  <!-- Audio UI -->
  <div id="audio-control" aria-live="polite">
    <button id="play-pause" class="btn-icon" title="Play/Pause (Space)">‚è∏</button>
    <button id="mute-btn" class="btn-icon" title="Mute/Unmute (M)">üîä</button>
    <div id="volume-wrap" class="btn-icon" title="Volume">
      üéö
      <input id="volume-slider" type="range" min="0" max="1" step="0.01" value="0.2" aria-label="Volume" />
    </div>
  </div>

  <!-- Background audio (unmuted only after user gesture) -->
  <audio id="bg-music" preload="none" loop muted></audio>

  <!-- Card -->
  <div class="center-box" aria-label="Profile card">
    <img src="profile.jpg" alt="Profile" class="profile-pic" decoding="async">
    <h1>mr wick</h1>
    <div class="tagline">welcome agent ‚Ä¢ guns loaded</div>

    <div class="sep"></div>

    <div class="icons">
      <a class="link" href="https://mrwick.my.canva.site/" target="_blank" rel="noopener">Website</a>
      <a class="link" href="https://x.com/__mrwick__/" target="_blank" rel="noopener">Twitter</a>
    </div>
  </div>

  <script>
    // Elements
    const entryScreen   = document.getElementById('entry-screen');
    const centerBox     = document.querySelector('.center-box');
    const audioControl  = document.getElementById('audio-control');
    const bgMusic       = document.getElementById('bg-music');
    const volumeSlider  = document.getElementById('volume-slider');
    const playPause     = document.getElementById('play-pause');
    const muteBtn       = document.getElementById('mute-btn');

    // Playlist (add more files here if you want)
    const songs = ['background.mp3'];

    // Title animation (clean, no url flash)
    const phrases = ["mr wick", "welcome agent", "guns loaded"];
    let phraseIndex = 0, charIndex = 0, isDeleting = false, cursorVisible = true;
    let titleTimerId = null;

    function animateTitle(){
      const current = phrases[phraseIndex];
      const text = current.substring(0, charIndex);
      document.title = text + (cursorVisible ? ' |' : '');

      if(!isDeleting && charIndex < current.length){
        charIndex++;
      }else if(isDeleting && charIndex > 0){
        charIndex--;
      }else if(!isDeleting && charIndex === current.length){
        setTimeout(()=> isDeleting = true, 900);
      }else if(isDeleting && charIndex === 0){
        isDeleting = false;
        phraseIndex = (phraseIndex + 1) % phrases.length;
      }
      titleTimerId = setTimeout(animateTitle, 150);
    }

    // Blink cursor
    setInterval(()=> cursorVisible = !cursorVisible, 500);
    animateTitle();

    // Respect hidden tab (reduce CPU if not visible)
    document.addEventListener('visibilitychange', () => {
      if(document.hidden){
        if(titleTimerId) clearTimeout(titleTimerId);
      }else{
        animateTitle();
      }
    });

    // Load saved settings
    const savedVol = parseFloat(localStorage.getItem('mrw_vol'));
    if(!Number.isNaN(savedVol)){
      volumeSlider.value = String(savedVol);
    }
    const savedMuted = localStorage.getItem('mrw_muted') === '1';

    bgMusic.volume = parseFloat(volumeSlider.value);
    bgMusic.muted  = true; // will unmute on entry

    // Volume change
    volumeSlider.addEventListener('input', function(){
      bgMusic.volume = parseFloat(this.value);
      localStorage.setItem('mrw_vol', bgMusic.volume.toFixed(2));
    });

    function setMute(state){
      bgMusic.muted = state;
      muteBtn.textContent = state ? 'üîá' : 'üîä';
      localStorage.setItem('mrw_muted', state ? '1' : '0');
    }

    function setPlayingUI(isPlaying){
      playPause.textContent = isPlaying ? '‚è∏' : '‚ñ∂';
    }

    // Entry: start music, show card, show controls
    async function enterSite(){
      // choose random song
      const randomSong = songs[Math.floor(Math.random() * songs.length)];
      if(bgMusic.src.endsWith(randomSong) === false){
        bgMusic.src = randomSong;
      }

      entryScreen.style.opacity = '0';
      setTimeout(()=>{ entryScreen.style.display = 'none'; }, 220);

      centerBox.style.display = 'block';
      audioControl.style.display = 'flex';

      // apply saved mute state after gesture
      setMute(savedMuted);

      try{
        await bgMusic.play();
        // If muted and play was allowed, keep it muted per saved state
        setPlayingUI(true);
      }catch(e){
        // If play fails (e.g., iOS edge case), show paused state
        setPlayingUI(false);
      }
    }

    entryScreen.addEventListener('click', enterSite);
    window.addEventListener('keydown', (e)=>{
      if(entryScreen.style.display !== 'none' && (e.key === 'Enter' || e.key === ' ')){
        e.preventDefault();
        enterSite();
      }
    });

    // Controls
    playPause.addEventListener('click', async ()=>{
      if(bgMusic.paused){
        try{
          await bgMusic.play();
          setPlayingUI(true);
        }catch(e){
          setPlayingUI(false);
        }
      }else{
        bgMusic.pause();
        setPlayingUI(false);
      }
    });

    muteBtn.addEventListener('click', ()=>{
      setMute(!bgMusic.muted);
    });

    // Keyboard shortcuts (once inside)
    window.addEventListener('keydown', (e)=>{
      if(entryScreen.style.display !== 'none') return;

      if(e.key === ' '){ // space: play/pause
        e.preventDefault();
        playPause.click();
      }
      if(e.key.toLowerCase() === 'm'){ // mute
        e.preventDefault();
        muteBtn.click();
      }
      if(e.key === 'ArrowUp'){
        e.preventDefault();
        volumeSlider.value = String(Math.min(1, parseFloat(volumeSlider.value) + 0.05));
        volumeSlider.dispatchEvent(new Event('input'));
      }
      if(e.key === 'ArrowDown'){
        e.preventDefault();
        volumeSlider.value = String(Math.max(0, parseFloat(volumeSlider.value) - 0.05));
        volumeSlider.dispatchEvent(new Event('input'));
      }
    });

    // Update UI on play/pause events (covers mobile controls)
    bgMusic.addEventListener('play', ()=> setPlayingUI(true));
    bgMusic.addEventListener('pause',()=> setPlayingUI(false));
  </script>
</body>
</html>
